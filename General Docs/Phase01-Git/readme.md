<div dir=rtl align="center">
به نام خدا
</div>

# Git

<div dir=rtl align="rtl">

## « سیستم کنترل نسخه »( Version Control System ( VCS ) ) چیست و چرا باید بدان پرداخت؟

کنترل نسخه سیستمی است که تغییرات را در فایل یا دسته‌ای از فایل‌ها ذخیره می‌کند و به شما این امکان را می‌دهد که در آینده به نسخه و نگارش خاصی برگردید.
اگر شما یک گرافیست یا طراح وب هستید و می‌خواهید نسخه‌های متفاوت از عکس‌ها و قالب‌های خود داشته باشید (که احتمالاً می‌خواهید)، یک سیستم کنترل نسخه انتخاب خردمندانه‌ای است. یک VCS به شما این امکان را می‌دهد که فایل‌های انتخابی یا کل پروژه را به یک حالت قبلی خاص برگردانید، روند تغییرات را بررسی کنید، ببینید چه کسی آخرین‌بار تغییری ایجاد کرده که احتمالاً مشکل آفرین شده، چه کسی، چه وقت مشکلی را اعلام کرده و…​ استفاده از یک VCS همچنین به این معناست که اگر شما در حین کار چیزی را خراب کردید و یا فایل‌هایی از دست رفت، به سادگی می توانید کارهای انجام شده را بازیابی نمایید. همچنین مقداری سربار به فایل‌های پروژه‌تان افزوده می‌شود.

هر چیزی در گیت قبل از اینکه ذخیره شود چک‌سام می‌شود و سپس متعاقباً با آن چک‌سام فراخوانی می‌شود. این بدان معناست که غیرممکن است که محتوای فایل یا پوشه‌ای را بدون اینکه گیت متوجه شود ویرایش کنید. این کارکرد درون گیت و در پایین‌ترین مرتبه‌ها ساختار یافته و با تاروپود فلسفه‌اش همراه است. ممکن نیست که شما اطلاعات را حین انتقال یا بر اثر خرابی از دست بدهید بدون اینکه گیت آن را تشخیص دهد.

وقتی که کاری در گیت می‌کنید، تقریباً همه آن افزودن به اطلاعات درون پایگاه‌داده گیت است. به بیان دیگر، انجام کاری که سیستم نتواند آن را بازگردانی کند یا اجبار آن به پاک‌سازی کامل اطلاعات به هر نحو بسیار دشوار است. اما در هر VCS دیگر، شما می‌توانید تغییراتی که هنوز کامیت نکرده‌اید بهم بریزید یا از دست بدهید، اما بعد از اینکه یک اسنپ‌شات به گیت کامیت کردید، از دست دادن آن بسیار مشکل است، بخصوص اگر به طور منظم پایگاه‌داده‌تان را به مخزنی دیگر پوش( Push/هل دادن ) می‌کنید.

**_برای اطلاعات بیشتر می‌توانید به این [لینک](https://git-scm.com/book/en/v2/Getting-Started-About-Version-Control) مراجعه کنید._**

## نصب و راه‌اندازی

برای استفاده از امکانات Git در محیط کامندلاین می‌بایست برنامه‌ی [Git](https://git-scm.com/downloads) را دانلود و نصب کنید که برخی از IDEها نیز برای اینکه امکانات این ابزار را در قالبی گرافیکی در اختیار کاربر بگذارند به عنوان پیشنیاز به این برنامه نیاز دارند، پس پیشنهاد می‌شود فارغ از ترجیحات این نرم‌افزار را نصب کنید.

**_برای اطلاعات بیشتر به این [لینک](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git) مراجعه کنید._**

ابزار دیگری که امکانات Git را در قالبی گرافیکی در اختیار شما می‌گذارد نرم‌افزار [GitHub Desktop](https://desktop.github.com/) می‌باشد که با داشتن اکانت GitHub می‌توانید از امکانات این برنامه بهره‌مند شوید.

## وضعیت داده‌ها در گیت

اطلاعات درون گیت می‌توانند سه وضعیت داشته باشند: ویرایش شده، استیج شده و کامیت شده.

- ویرایش‌شده( Modified ) به این معناست که شما تغییری در فایل ایجاد کرده‌اید اما هنوز آن را به پایگاه داده خود کامیت نکرده‌اید.

- استیج‌شده( Staged ) به این معناست که شما ویرایشی در نسخه حال فایل را علامت‌گذاری کرده‌اید تا به اسنپ‌شاتِ کامیت بعدی شما اضافه شود.

- کامیت‌شده( Commited ) به این معناست که اطلاعات با امنیت کامل در پایگاه‌داده محلی شما ذخیره شده‌اند.

 <div dir=ltr align="center">

![Git image 1](https://github.com/MARS-JSU/Internship-Documents/blob/main/General%20Docs/Phase01-Git/Picture1.png)

</div>
پ.ن: البته وضعیت «دنبال نشده» نیز داریم که به معنی عدم حضور داده در Git می‌باشد، ولی این وضعیت از دیدگاهی میان «وضعیت داده‌ها در گیت» طبقه بندی نمی‌شود.

**_برای اطلاعات بیشتر این [لینک](https://git-scm.com/book/en/v2/Git-Basics-Recording-Changes-to-the-Repository) را مطالعه بفرمایید._**

## ایجاد پروژه

برای ایجاد پروژه دو مسیر را می‌توان دنبال کرد:

1. **تبدیل یک پوشه محلی به مخزن گیت.**

   یک پوشه جدید ایجاد کنید.
   خط فرمان( command-line ) را باز کرده و به پوشه مورد نظر وارد شوید( cmd: cd path/to/directory/ ).
   با اجرای دستور git init در داخل پوشه، یک فایل .git ایجاد شده و از این به بعد گیت تغییرات درون این پوشه را دنبال خواهد کرد.

   <div dir=ltr align="left">

   ```powershell
       >> cd /your/project/path
       >> git init
   ```

   </div>

2. **نسخه برداری( clone ) از یک مخزن موجود.**

   وارد یکی از سرورهای گیت( Github، Gitlab، Microsoft Azure یا ... ) بشوید.
   لینک یک مخزن را کپی کنید.
   یک پوشه جدید در کامپیوتر خود ایجاد کنید.
   خط فرمان( command-line ) را باز کرده و به پوشه مورد نظر وارد شوید( cmd: cd path/to/directory/ ).
   از اتصال به اینترنت اطمینان حاصل کنید و دستور git clone “your url” را اجرا کنید تا فایل‌های روی سرور به پوشه شما منتقل شوند.

   <div dir=ltr align="left">

   ```powershell
       >> cd /your/project/path
       >> git clone https://someSourceServer.domain/projectName
   ```

   </div>

**_برای مطالعه بیشتر به این [لینک](https://git-scm.com/book/en/v2/Git-Basics-Getting-a-Git-Repository) مراجعه کنید._**

## اعمال تغییرات

برای آگاهی از وضعیت فایل‌ها از دستور زیر استفاده می‌شود که فایل‌های ویرایش شده و استیج شده را به شما نمایش می‌دهد.

<div dir=ltr align="left">

```powershell
    >> git status
```

</div>

برای استیج کردن فایل‌های ویرایش شده مطابق دستورات زیر هم می‌توان از نام فایل استفاده کد و هم می‌توان از تریگر A- برای انتخاب تمامی فایل‌های تغییر کرده استفاده کرد.

<div dir=ltr align="left">

```powershell
    >> git add “file name”
    >> git add -A
```

</div>

در نهایت برای کامیت کردن فایل‌های استیج شده می‌توانید از دستور زیر استفاده کنید که اسنپشاتی از فایل‌ها تهیه کرده و در پایگاه داده محلی ذخیره می‌کند.

<div dir=ltr align="left">

```powershell
    >> git commit –m “your commit tag”
```

</div>

_پ.ن: با گزینه m- می‌توانید یک تگ( نام، پیام یا ... ) به کامیت خود اضافه کنید و در آینده برای checkout کردن به این کامیت از تگ کامیت استفاده کنید._

برای مشاهده لیست کامیت‌های انجام شده روی مخزن خود نیز می‌توانید از دستور زیر استفاده کنید.

<div dir=ltr align="left">

```powershell
    >> git log
```

</div>

**_برای اطلاعات بیشتر به این [لینک](https://git-scm.com/book/en/v2/Git-Basics-Viewing-the-Commit-History) مراجعه کنید._**

**_برای خواناتر و بهتر نوشتن پیام کامیت‌ها، میتوانید مطالب [لینک](https://gist.github.com/turbo/efb8d57c145e00dc38907f9526b60f17) را مطالعه کنید. همچنین استفاده از [Gitmoji](https://gitmoji.dev/) در ابتدای پیام برای زیباتر کردن  کامیت توصیه می‌شود._**

## بازگرداندن تغییرات

همانگونه که پیشتر گفته شد یکی از مزایای استفاده از ابزارهای کنترل نسخه امکان بازگشت به عقب و اصلاح اشتباهات است، در این قسمت به راه‌های انجام این کار می‌پردازیم.

- یکی از برگشت‌های معمول زمانی صورت می‌گیرد که زودتر از آن‌چه که باید تغییرات را کامیت کرده‌اید یا بعد از کامیت کردن متوجه مشکلی در فایل‌های کامیت شده یا تگ کامیت می‌شوید. در این حالت با استفاده از گزینه amend-- می‌توانید فایل‌های استیج شده را به کامیت قبلی اضافه کنید و تگ کامیت را نیز ویرایش کنید.

    <div dir=ltr align="left">

  ```powershell
      >> git commit –m “new tag” -–amend
  ```

    </div>

- برداشتن داده از حالت استیج شده یکی دیگر از امکانات مورد نیاز می‌باشد، چرا که در بعضی مواقع کاربر به جای "git add “file name از git add –A( یا git add \* ) استفاده می‌کند که همه‌ی فایل‌های ویرایش شده را به حالت استیج شده می‌برد. اگر به پیامی که دستور git status نمایش می‌دهد دقت کنید می‌بینید که نوشته شده است « use "git restore --staged \<file>..." to unstage » که نحوه خارج کردن فایل( ها ) از حالت استیج شده را نشان می‌دهد.

    <div dir=ltr align="left">

  ```bash
      >> git restore --staged <file>
  ```

    </div>

- بازگرداندن فایل به وضعیتی که در آخرین کامیت داشته است یکی از راه‌های معمول برای درست کردن چیزی است که خراب کرده‌ایم، با این کار تمام تغییراتی که از آخرین کامیت بر روی یک فایل صورت گرفته است برگردانده می‌شوند و فایل به وضعیت سابق خود باز می‌گردد. برای انجام این کار مجددا به راهنمایی‌های دستور git status دقت می‌کنیم: «use "git restore \<file>..." to discard changes in working directory ».

    <div dir=ltr align="left">

  ```powershell
      >> git restore <file>
  ```

    </div>

**_برای مطالعه‌ی بیشتر به این [لینک](https://git-scm.com/book/en/v2/Git-Basics-Undoing-Things) مراجعه کنید._**

<div dir=ltr align="left">

## gitignore

</div>

در بسیاری از تکنولوژی‌ها برای نگهداری اطلاعات حساس( اطلاعات مربوط به پایگاه داده، برخی اطلاعات هویتی و داده‌های وابسطه به پلتفرم ) از فایل‌های محلی در مسیر پروژه استفاده می‌شود که باید از انتشار این فایل‌ها پرهیز کرد. همچنین بسیاری از تکنولوژی‌ها برای اجرای کدها علاوه بر کامپایلر یا مفسر به تعدادی کتابخوانه و فایل‌های اضافه نیز نیاز دارند که عموما حجم بالایی دارند و پیشنهاد می‌شود از قرار دادن این داده‌ها در گیت پرهیز کنید.

گیت امکانی برای نادیده گرفتن برخی داده‌ها فراهم کرده است تا کاربر قادر باشد برخی فایل‌ها را از دید گیت مخفی کند.
برای انجام این کار کافی است که در مسیری که می‌خواهید در آن فایل‌هایی را از دید گیت مخفی کنید یک فایل با پسوند gitignore. ایجاد کنید و نام فایل( ها ) یا مسیر منتهی به آن( ها ) را در این فایل متنی بنویسید. در صورتی که فایل( های ) مورد نظر در گیت ذخیره نشده باشند از این پس نیز توسط گیت دنبال نمی‌شوند.

در سطح وب ابزارهایی برای ایجاد فایل .gitignore با توجه به تکنولوژی‌هایی که در پروژه خود استفاده کرده‌اید وجود دارد( مثلا این [سایت](https://www.toptal.com/developers/gitignore) ).

## ریموت

برای اینکه بتوانید در هر پروژهٔ گیت همکاری کنید، دانستن شیوهٔ مدیریت مخزن‌های ریموت لازم است. مخازن ریموت یک نسخه از پروژهٔ شما هستند که در اینترنت یا جایی دیگر در شبکه قرار دارند. می‌توانید چند تا از آن ها داشته باشید که معمولاً هر کدام برای شما یا فقط قابل خواندن یا خواندنی/نوشتی هستند. همکاری با دیگران شامل درگیری با مدیریت این مخازن ریموت و پوش و پول کردن داده از و به آن ها به هنگام اشتراک کار است.

مدیریت مخازن ریموت به مفهوم دانستن نحوه افزودن مخازن ریموت، حذف کردن ریموت‌های منقضی، مدیریت شاخه‌های گوناگون ریموت و تعریف آن ها به عنوان دنبال‌شده یا دنبال‌شنده و غیره است. در این بخش ما درباره برخی از مهارت‌‌های مدیریت ریموت صبحت خواهیم کرد.

- **مشاهده ریموت‌ها:**

  مشاهده ریموت‌های پروژه‌ی محلی به سادگی با دستور زیر امکان پذیر است.
    <div dir=ltr align="left">

  ```powershell
      >> git remote
  ```

    </div>

- **اضافه کردن مخازن ریموت:**

  مخازنی که به وسیله دستور git clone بر روی کامپیوتر خود کپی کردید همواره یک ریموت( ریموتی که کلون از آن صورت گرفته ) دارند اما برای اضافه کردن ریموت جدید به یک مخزن محلی می‌توانید از دستور زیر استفاده کنید که یک ریموت با آدرس نوشته شده و نام دلخواه به مخزن شما اضافه
  می‌کند.

    <div dir=ltr align="left">

  ```powershell
      >> git remote add <shortname> <url>
  ```

    </div>

- **فچ و پول کردن از ریموت‌ها:**

  دستور fetch تمام اطلاعات ریموت که روی سیستم محلی شما وجود ندارند را به سیستم محلی شما کپی می‌کند، اما دستور pull علاوه بر کپی کردن اطلاعات از سرور این اطلاعات را با اطلاعات محلی شما نیز ادغام می‌کند.

    <div dir=ltr align="left">

  ```powershell
      >> git fetch <remote name>
      >> git pull <remote name>
  ```

    </div>

- **پوش کردن به ریموت:**

  در مرحله‌ای شما نیاز دارید که تغییرات اعمال شده روی نسخه محلی( کامیت‌ها ) را به ریموت خود ارسال کنید، این کار با دستور زیر صورت می‌گیرد که در آینده به موضوع شاخه خواهیم پرداخت.

    <div dir=ltr align="left">

  ```powershell
      >> git push <remote name> <branch name>
  ```

    </div>

- **تغییر نام و حذف ریموت:**

  با دستور rename به سادگی می‌توانید نام ریموت را تغییر بدهید و با دستور remove می‌توانید ریموت و تمام شاخه‌های پیگیر و پیکربندی‌های مربوط به ریموت را پاک کنید.

    <div dir=ltr align="left">

  ```powershell
      >> git remote rename <old name> <new name>
      >> git remote remove <name>
  ```

    </div>

**_برای مطالعه‌ی بیشتر به این [لینک](https://git-scm.com/book/en/v2/Git-Basics-Working-with-Remotes) مراجعه کنید._**

## شاخه( Branch )

شاخه یا شعبه‌سازی (Branching) به معنی این است که شما از مسیر اصلی توسعه جدا شده و به ادامهٔ کار، بدون خرابی به بار آوردن در مسیر اصلی بپردازید.

 <div dir=ltr align="center">

![Git image 2](https://github.com/MARS-JSU/Internship-Documents/blob/main/General%20Docs/Phase01-Git/Picture2.png)

</div>

- **در هنگام کامیت چه چیزی ذخیره می‌شود؟**

  وقتی یک کامیت می‌سازید، گیت یک آبجکت کامیت که شامل یک نشانگر به اسنپ‌شات دربرگیرندهٔ اطلاعات صحنهٔ شماست را ذخیره می‌کند. این آبجکت همچنین شامل نام نویسنده و آدرس ایمیل او، پیغامی که وارد کرده‌اید و یک نشانگر به کامیت یا کامیت‌هایی که مستقیماً قبل این کامیت (والد یا والدین) آمده‌اند است( صفر والد برای کامیت اولیه، یک والد برای یک کامیت معمولی و چند والد برای یک کامیت مرج حاصل یک یا چند برنچ )

  وقتی کامیتی را با اجرای git commit می‌سازید، گیت همهٔ زیرپوشه‌ها را چک‌سام می‌کند و آن‌ها را به عنوان یک آبجکت درخت در مخزن گیت ذخیره می‌کند. سپس گیت یک کامیت آبجکت که متادیتا و نشانگری که به روت درخت پروژه دارد می‌سازد تا بتواند اسنپ‌شات پروژه را هنگامی که نیاز بود بازسازی کند.

- **شاخه در عمل چیست؟**

  یک برنچ گیت یک نشانگر سبک‌وزن قابل انتقال به یکی از این کامیت‌هاست. نام پیش‌‌فرض برنچ در گیت master است. همچنان که کامیت می‌سازید، یک برنچ master برایتان ساخته می‌شود که به آخرین کامیتی که ساخته‌اید اشاره می‌کند. هر بار که کامیت می‌کنید نشانگر برنچ master به طور خودکار به جلو حرکت می‌کند.

- **وقتی یک برنچ جدید می‌سازید چه اتفاقی می‌افتد؟**

  انجام این کار یک نشانگر جدید برای شما می‌سازد تا آنرا به این سو و آن سو انتقال دهید. فرض بر این بگذاریم که می‌خواهید برنچ جدیدی با نام testing بسازید.

- **چگونه گیت می‌داند که روی چه شاخه‌ای کار می‌کنید؟**

  گیت نشانگر خاصی به نام HEAD( هد ) را در خود دارد. در گیت، هد نشانگری است که به برنچ محلی که روی آن هستید اشاره می‌کند.

### ساختن شاخه جدید:

برای ساخت یک شاخه جدید( اشاره‌گر به مکان کنونی HEAD ) کافی است از دستور زیر استفاده کنید تا یک شاخه جدید با نام دلخواه برای شما ساخته شود.

 <div dir=ltr align="left">

```powershell
    >> git branch <branch name>
```

</div>

### تعویض شاخه‌ها:

برای تعویض یا جابه‌جایی به یک برنچ از پیش ساخته شده دستور زیر را اجرا می‌کنید.

<div dir=ltr align="left">

```powershell
    >> git checkout <branch name>
```

</div>

### مزیت استفاده از شاخه‌ها:

عموما از شاخه‌ها برای مدیریت دسترسی و حفاظت از شاخه‌ی اصلی استفاده می‌شود.

<div dir=ltr align="center">

![Git image 3](https://github.com/MARS-JSU/Internship-Documents/blob/main/General%20Docs/Phase01-Git/Picture3.png)

</div>

### ادغام شاخه‌ها

برای ادغام شاخه «الف» با شاخه «ب» ابتدا به شاخه «ب» تغییر شاخه می‌دهیم و سپس با استفاده از دستور زیر شاخه‌ی الف را به شاخه‌ی ب ادغام می‌کنیم.

<div dir=ltr align="left">

```powershell
    >> git merge <branch>
```

</div>

<div dir=ltr align="center">

![Git image 4](https://github.com/MARS-JSU/Internship-Documents/blob/main/General%20Docs/Phase01-Git/Picture4.png)

![Git image 5](https://github.com/MARS-JSU/Internship-Documents/blob/main/General%20Docs/Phase01-Git/Picture5.png)

</div>

**_برای مطالعه‌ی بیشتر درباره‌ی برنچ‌ها می‌توانید از این [لینک](https://git-scm.com/book/en/v2/Git-Branching-Branches-in-a-Nutshell) استفاده کنید._**

</div>
